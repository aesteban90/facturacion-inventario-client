(this["webpackJsonpfacturacion-inventario-client"]=this["webpackJsonpfacturacion-inventario-client"]||[]).push([[0],{218:function(e,t,a){},219:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){},297:function(e,t){},299:function(e,t){},313:function(e,t){},315:function(e,t){},33:function(e,t,a){"use strict";function n(e){for(var t=e.trim().replaceAll(".",""),a=0,n=2,c=t.length-1;c>=0;c--){var s=t[c];a+=parseInt(s)*n,n++}var o=a%11;return o>1?11-o:0}function c(e){(e=(e+="").replace(".",",")).indexOf(",")>-1&&(e=e.substring(0,e.indexOf(",")+3));for(var t=e.split(".")[0],a=/(\d+)(\d{3})/;a.test(t);)t=t.replace(a,"$1.$2");return"null"===t?"":t}function s(e){(e=(e=(e+="").split(".")[0]).replace(".",",")).indexOf(",")>-1&&(e=e.substring(0,e.indexOf(",")+3));for(var t=e.split(".")[0],a=/(\d+)(\d{3})/;a.test(t);)t=t.replace(a,"$1.$2");return"null"===t?"":t}a.r(t),a.d(t,"getDiv",(function(){return n})),a.d(t,"convertMiles",(function(){return c})),a.d(t,"convertMilesSinDecimales",(function(){return s}))},343:function(e,t){},345:function(e,t){},346:function(e,t){},351:function(e,t){},353:function(e,t){},359:function(e,t){},361:function(e,t){},380:function(e,t){},392:function(e,t){},395:function(e,t){},414:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(42),o=a.n(s),r=(a(218),a(3)),i=a(7),d=a(16),l=(a(219),a(8)),u=a(12),j=a.p+"static/media/LogoDRDistribuidora.1125918a.PNG";function p(){return localStorage.removeItem("tokenKH"),window.location="/",""}var h=a(0),m=function(e){return Object(h.jsx)("div",{className:"navigation-top pr-3",id:"nav",children:Object(h.jsx)("ul",{className:"nav-wrapper-top",children:e.children})})},b=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],s=a[1],o=e.id?{id:e.id}:"";return"account"===e.id?Object(h.jsx)("li",{className:"nav-wrapper-top-item",children:Object(h.jsxs)("span",Object(l.a)(Object(l.a)({},o),{},{href:"#",className:"icon-button",children:[Object(h.jsx)(u.a,{icon:e.icon}),e.children]}))}):"closesession"===e.id?Object(h.jsx)("li",{className:"nav-wrapper-top-item",children:Object(h.jsxs)("button",Object(l.a)(Object(l.a)({},o),{},{href:"#",className:"btn btn-warning btn-sm",onClick:function(){return p()},children:[Object(h.jsx)(u.a,{icon:e.icon})," ",e.children]}))}):Object(h.jsxs)("li",{className:"nav-wrapper-top-item",children:[Object(h.jsx)("a",Object(l.a)(Object(l.a)({},o),{},{href:"/#",className:"icon-button",onClick:function(){return s(!c)},children:Object(h.jsx)(u.a,{icon:e.icon})})),c&&e.children]})},O=function(e){return Object(h.jsxs)("div",{className:"nav-wrapper",children:[Object(h.jsx)("div",{className:"logo-wrapper",children:Object(h.jsx)("a",{href:"/",children:Object(h.jsx)("img",{src:j,alt:"Know How"})})}),Object(h.jsx)("div",{className:"navigation",id:"nav",children:e.children})]})},v=function(e){return"account"===e.class?Object(h.jsx)("div",{className:"nav-item",children:Object(h.jsx)("div",{className:"sub-nav",style:{display:"block"},children:e.children})}):Object(h.jsxs)("div",{className:"nav-item active",children:[Object(h.jsxs)("span",{className:"nav-list-item ".concat(e.class?e.class:""),children:[Object(h.jsx)(u.a,{icon:e.icon})," ",e.name]}),Object(h.jsx)("div",{className:"sub-nav",style:{display:"block"},children:e.children})]})},_=function(e){return Object(h.jsxs)("a",{className:"sub-nav-item",href:e.path,children:[Object(h.jsx)(u.a,{icon:e.icon})," ",e.name]})},S=a(10),f=Object(n.createContext)({currentUser:{}}),x=f,g=a(48),C=a.n(g),E=function(e){var t=Object(n.useContext)(f).currentUser;return Object(h.jsx)("div",{children:Object(h.jsxs)(m,{children:[Object(h.jsx)(b,{icon:S.m,id:"account",children:Object(h.jsxs)("p",{className:"mb-0",children:[Object(h.jsxs)("b",{children:[t.name," "]}),"  logueado en ",C()(t.fecha).format("DD/MM/YYYY")]})}),Object(h.jsx)(b,{icon:S.b,id:"closesession",children:" Cerrar Session"})]})})},N=function(e){var t=Object(n.useContext)(f).currentUser;return Object(h.jsxs)("div",{children:[Object(h.jsx)(E,{}),Object(h.jsxs)(O,{children:[Object(h.jsx)("div",{className:"nav-item",children:Object(h.jsx)("span",{className:"nav-list-item title",style:{display:"block"},children:"Facturacion - Inventario"})}),Object(h.jsxs)(v,{icon:S.i,name:"General",children:[Object(h.jsx)(_,{icon:S.h,name:"Dashboard",path:"/Dashboard"}),Object(h.jsx)(_,{icon:S.c,name:"Caja",path:"/Caja"})]}),t.roles.includes("ADM")&&Object(h.jsxs)(v,{icon:S.g,name:"Configuraciones",children:[Object(h.jsx)(_,{icon:S.p,name:"Inventario",path:"/Inventario"}),Object(h.jsx)(_,{icon:S.o,name:"Clientes",path:"/Clientes"}),Object(h.jsx)(_,{icon:S.l,name:"Proveedores",path:"/Proveedores"}),Object(h.jsx)(_,{icon:S.d,name:"Compras",path:"/Compras"}),Object(h.jsx)(_,{icon:S.n,name:"Usuarios",path:"/Usuarios"}),Object(h.jsx)(_,{icon:S.p,name:"Timbrados",path:"/Timbrados"})]})]})]})},T=a(11),R=a(211),P=a(44),D=a.n(P),y=a(102),U=a(138),L=a.n(U);y.a.localize.month=L()({values:{narrow:["E","F","\u041c","\u0410","\u041c","J","J","A","S","\u041e","N","D"],abbreviated:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Set","Oct","Nov","Dic"],wide:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"]},defaultWidth:"wide",defaultFormattingWidth:"wide"}),y.a.localize.day=L()({values:{narrow:["D","L","M","\u041c","J","V","S"],abbreviated:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],wide:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"]},defaultWidth:"abbreviated",defaultFormattingWidth:"abbreviated"}),Object(P.registerLocale)("esp",y.a),Object(P.setDefaultLocale)("esp");var A=a(13),w=a(14),k=a(18),W=a(19),F=a(420),H=a(139),V=a.n(H),K=a(49),q=(a(265),a(33).convertMilesSinDecimales),B=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeReporteVentasFechaMes=function(e){n.setState({reporteVentas_fechaMes:e},(function(){return n.reportePorMes()}))},n.onChangeReporteVentasFechaDia=function(e){n.setState({reporteVentas_fechaDia:e},(function(){return n.reportePorDia()}))},n.onChangeDatosCargados=function(e){n.setState({datosCargadosSelected:e}),n.changeDatosCargados(e)},n.changeDatosCargados=function(e){e.label.indexOf("Dia")>-1?n.reporteProductosPorDia(e.value):e.label.indexOf("Mes")>-1?n.reporteProductosPorMes(e.value):e.label.indexOf("A\xf1o")>-1&&n.reporteProductosPorAnho(e.value)},n.productosMasVendidos=function(){F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/topMasVendidos/1").then((function(e){n.setState({reporteProductos:e.data},(function(){n.reporteProductosPorDia()}))})).catch((function(e){return console.log(e)}))},n.productosPorFecha=function(){F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/totalesPorMes/1").then((function(e){n.setState({reporteVentas:e.data},(function(){n.reportePorDia(),document.querySelector("#dia-outlined").checked=!0}))})).catch((function(e){return console.log(e)}))},n.reportePorDia=function(){document.querySelector("#datepicker_dia").classList.remove("d-none"),document.querySelector("#datepicker_mes").classList.add("d-none");var e,t=[],a=[],c=[],s=0,o=n.state.reporteVentas_fechaDia.getFullYear(),r=n.state.reporteVentas_fechaDia.getMonth()+1;n.state.reporteVentas.map((function(e){e._id.year===o&&e.monthlyusage.map((function(e){e.month===r&&e.dailyusage.map((function(e){t.push({value:e.day,label:"Dia "+e.day}),c.push(e.totalPrecio),a.push(e.day),s+=e.totalPrecio}))}))})),e=t[0],n.changeDatosCargados(e);var i={chart:{id:"basic-bar",type:"bar"},xaxis:{categories:a},yaxis:{labels:{formatter:function(e){return"Gs. "+q(e)}}},dataLabels:{enabled:!1}},d=[{name:"Totales",data:c}];n.setState({datosCargadosSelected:e,datosCargadosOptions:t,reporteVentas_options:i,reporteVentas_series:d,reporteVentas_totales_ventas:"Gs. "+q(s)})},n.reportePorMes=function(){document.querySelector("#datepicker_dia").classList.add("d-none"),document.querySelector("#datepicker_mes").classList.remove("d-none");var e,t=[],a=[],c=[],s=0,o=n.state.reporteVentas_fechaMes.getFullYear();n.state.reporteVentas.map((function(e){e._id.year===o&&e.monthlyusage.map((function(e){var o=0;e.dailyusage.map((function(e){o+=e.totalPrecio,s+=e.totalPrecio})),c.push(o),a.push(n.state.month[e.month-1]),t.push({value:e.month,label:"Mes "+n.state.month[e.month-1]})}))})),e=t[0],n.changeDatosCargados(e);var r={chart:{id:"basic-bar",type:"bar"},xaxis:{categories:a},yaxis:{labels:{formatter:function(e){return"Gs. "+q(e)}}},dataLabels:{enabled:!1}},i=[{name:"Totales",data:c}];n.setState({datosCargadosSelected:e,datosCargadosOptions:t,reporteVentas_options:r,reporteVentas_series:i,reporteVentas_totales_ventas:"Gs. "+q(s)})},n.reportePorAnho=function(){document.querySelector("#datepicker_dia").classList.add("d-none"),document.querySelector("#datepicker_mes").classList.add("d-none");var e,t=[],a=[],c=[],s=0;n.state.reporteVentas.map((function(e){var n=0;e.monthlyusage.map((function(e){e.dailyusage.map((function(e){n+=e.totalPrecio,s+=e.totalPrecio}))})),c.push(n),a.push(e._id.year),t.push({value:e._id.year,label:"A\xf1o "+e._id.year})})),e=t[0],n.changeDatosCargados(e);var o={chart:{id:"basic-bar",type:"bar"},xaxis:{categories:a},yaxis:{labels:{formatter:function(e){return"Gs. "+q(e)}}},dataLabels:{enabled:!1}},r=[{name:"Totales",data:c}];n.setState({datosCargadosSelected:e,datosCargadosOptions:t,reporteVentas_options:o,reporteVentas_series:r,reporteVentas_totales_ventas:"Gs. "+q(s)})},n.state={month:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"],reporteVentas:{},reporteVentas_totales_ventas:"",reporteVentas_totales_productos:"",reporteVentas_fechaDia:new Date,reporteVentas_fechaMes:new Date,reporteVentas_options:{},reporteVentas_series:[],reporteProductos:[],reporteProductos_options:{},reporteProductos_series:[],datosCargadosSelected:{},datosCargadosOptions:[],chartProductos_height:"600px"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.productosPorFecha(),this.productosMasVendidos()}},{key:"reporteProductosPorDia",value:function(e){document.querySelector("#datepicker_dia").classList.remove("d-none"),document.querySelector("#datepicker_mes").classList.add("d-none");var t=!1,a=[],n=[],c=0,s=this.state.reporteVentas_fechaDia.getFullYear(),o=this.state.reporteVentas_fechaDia.getMonth()+1;this.state.reporteProductos.map((function(r){t=!1,r.yearlyusage.map((function(a){a.year===s&&a.monthlyusage.map((function(a){a.month===o&&a.dailyusage.map((function(a){void 0===e&&(e=a.day),a.day===e&&(n.push(a.totalPrecio),c+=a.totalPrecio,t=!0)}))}))})),t&&a.push(r._id.inventario[0])}));var r={chart:{id:"basic-bar-2",type:"bar"},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:a,labels:{formatter:function(e){return"Gs. "+q(e)}}},yaxis:{labels:{formatter:function(e){return""+q(e)}}},dataLabels:{enabled:!1}},i=[{name:"Totales",data:n}];this.setState({chartProductos_height:"600px",reporteProductos_options:r,reporteProductos_series:i,reporteVentas_totales_productos:"Gs. "+q(c)})}},{key:"reporteProductosPorMes",value:function(e){document.querySelector("#datepicker_dia").classList.remove("d-none"),document.querySelector("#datepicker_mes").classList.add("d-none");var t=!1,a=[],n=0,c=[],s=0,o=this.state.reporteVentas_fechaDia.getFullYear();this.state.reporteProductos.map((function(r){n=0,t=!1,r.yearlyusage.map((function(a){a.year===o&&a.monthlyusage.map((function(a){void 0===e&&(e=a.month),a.month===e&&a.dailyusage.map((function(e){n+=e.totalPrecio,s+=e.totalPrecio,t=!0}))}))})),t&&(c.push(n),a.push(r._id.inventario[0]))}));var r={chart:{id:"basic-bar-2",type:"bar"},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:a,labels:{formatter:function(e){return"Gs. "+q(e)}}},yaxis:{labels:{formatter:function(e){return""+q(e)}}},dataLabels:{enabled:!1}},i=[{name:"Totales",data:c}];this.setState({chartProductos_height:"1000px",reporteProductos_options:r,reporteProductos_series:i,reporteVentas_totales_productos:"Gs. "+q(s)})}},{key:"reporteProductosPorAnho",value:function(e){document.querySelector("#datepicker_dia").classList.remove("d-none"),document.querySelector("#datepicker_mes").classList.add("d-none");var t=!1,a=[],n=0,c=[],s=0;this.state.reporteProductos.map((function(o){n=0,t=!1,o.yearlyusage.map((function(a){void 0===e&&(e=a.year),a.year===e&&a.monthlyusage.map((function(e){e.dailyusage.map((function(e){n+=e.totalPrecio,s+=e.totalPrecio,t=!0}))}))})),t&&(c.push(n),a.push(o._id.inventario[0]))}));var o={chart:{id:"basic-bar-2",type:"bar",height:"1300px"},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:a,labels:{formatter:function(e){return"Gs. "+q(e)}}},yaxis:{labels:{formatter:function(e){return""+q(e)}}},dataLabels:{enabled:!1}},r=[{name:"Totales",data:c}];this.setState({chartProductos_height:"1500px",reporteProductos_options:o,reporteProductos_series:r,reporteVentas_totales_productos:"Gs. "+q(s)})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Dashboard"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-4",children:"Reporte de Ventas"}),Object(h.jsxs)("div",{className:"col-md-8 text-right",children:[Object(h.jsx)("input",{type:"radio",onClick:function(){return e.reportePorDia()},className:"btn-check",name:"options-outlined",id:"dia-outlined",autoComplete:"off"}),Object(h.jsx)("label",{className:"btn btn-outline",htmlFor:"dia-outlined",children:"Dia"}),Object(h.jsx)("input",{type:"radio",onClick:function(){return e.reportePorMes()},className:"btn-check",name:"options-outlined",id:"mes-outlined",autoComplete:"off"}),Object(h.jsx)("label",{className:"btn btn-outline",htmlFor:"mes-outlined",children:"Mes"}),Object(h.jsx)("input",{type:"radio",onClick:function(){return e.reportePorAnho()},className:"btn-check",name:"options-outlined",id:"anho-outlined",autoComplete:"off"}),Object(h.jsx)("label",{className:"btn btn-outline",htmlFor:"anho-outlined",children:"A\xf1o"})]})]})}),Object(h.jsxs)("div",{className:"reportVentasPorDia card-body",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-10 d-flex",children:Object(h.jsx)("div",{className:"d-flex",children:Object(h.jsx)("h3",{id:"totales_ventas",className:"text-bold text-lg",children:Object(h.jsxs)("b",{children:["Total: ",this.state.reporteVentas_totales_ventas]})})})}),Object(h.jsx)("div",{id:"datepicker_dia",className:"col-md-2",children:Object(h.jsx)(D.a,{className:"form-control",locale:"esp",required:!0,dateFormat:"MMMM yyyy",showMonthYearPicker:!0,selected:this.state.reporteVentas_fechaDia,onChange:this.onChangeReporteVentasFechaDia})}),Object(h.jsx)("div",{id:"datepicker_mes",className:"col-md-2 d-none",children:Object(h.jsx)(D.a,{className:"form-control",locale:"esp",required:!0,dateFormat:"yyyy",showYearPicker:!0,selected:this.state.reporteVentas_fechaMes,onChange:this.onChangeReporteVentasFechaMes})})]}),Object(h.jsx)("div",{className:"position-relative mb-4",children:Object(h.jsx)(V.a,{options:this.state.reporteVentas_options,series:this.state.reporteVentas_series,type:"bar",height:"300px"})})]})]})}),Object(h.jsx)("div",{className:"col-md-12 mt-3",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsx)("div",{className:"card-title row mb-0",children:Object(h.jsx)("div",{className:"col-md-12",children:"Productos Vendidos"})})}),Object(h.jsxs)("div",{className:"reportVentasPorProducto card-body",children:[Object(h.jsxs)("div",{className:" row col-md-12",children:[Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Datos Cargados: "}),Object(h.jsx)(K.a,{noOptionsMessage:function(){return"Cajas no Configuradas"},value:this.state.datosCargadosSelected,options:this.state.datosCargadosOptions,onChange:this.onChangeDatosCargados,required:!0})]}),Object(h.jsx)("div",{className:"form-group col-md-8",children:Object(h.jsx)("h4",{id:"totales_ventas",className:"text-bold text-lg",children:Object(h.jsxs)("b",{children:["Total: ",this.state.reporteVentas_totales_productos]})})})]}),Object(h.jsx)("div",{className:"position-relative mb-4",children:Object(h.jsx)(V.a,{id:"chartProductos",options:this.state.reporteProductos_options,series:this.state.reporteProductos_series,type:"bar",height:this.state.chartProductos_height})})]})]})})]})]})}}]),a}(n.Component),I=a(28),M=a(25),z=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).getCajasConfigOptions=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/").then((function(e){var t=[];e.data.length>0?(e.data.forEach((function(e){t.push({value:e._id,label:e.descripcion})})),n.setState({cajaSelected:t[0],cajaOptions:t})):n.setState({cajaSelected:{},cajaOptions:[]})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.onChangeCajas=function(e){n.setState({cajaSelected:e})},n.onChangeMontoApertura=function(e){n.setState({montoApertura:e.target.value})},n.onChangeDescripcion=function(e){n.setState({descripcion:e.target.value})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.props.onParentVerificarCaja(n.state.cajaSelected.value);case 3:(a=e.sent)||void 0===a?(c={caja:n.state.cajaSelected.value,estado:"Abierto",fechaApertura:n.state.fechaApertura,montoApertura:n.state.montoApertura.replace(/\./gi,""),user_created:n.state.user_created,user_updated:n.state.user_updated},F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas/add",c).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({cajaSelected:n.state.cajaOptions[0],montoApertura:"",textButton:"Abrir",titleForm:"Abrir Caja",idUpdate:"NEW"})):n.showNotification(!1,"Cierre la caja seleccionada antes de abrir otro.");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={fechaApertura:new Date,fechaCierre:null,cajaSelected:{},cajaOptions:[],montoApertura:"",montoCierre:"",user_created:"",user_updated:"",textButton:"Abrir",titleForm:"Abrir Caja",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name}),this.getCajasConfigOptions()}},{key:"showNotification",value:function(e,t){document.querySelector("#alert").classList.replace("hide","show"),""!==t?(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Atencion!</strong> "+t):!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),5e3)}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Fecha Apertura: "}),Object(h.jsx)("input",{type:"text",disabled:!0,className:"form-control",value:C()(this.state.fechaApertura).format("DD/MM/YYYY")})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Caja: "}),Object(h.jsx)(K.a,{noOptionsMessage:function(){return"Cajas no Configuradas"},value:this.state.cajaSelected,options:this.state.cajaOptions,onChange:this.onChangeCajas,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Monto Inicial: "}),Object(h.jsx)(M.a,{autoFocus:!0,thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.montoApertura,onChange:this.onChangeMontoApertura,required:!0})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);z.contextType=x;var Y=a(43),G=a(33),J=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.detallesFacturas=function(e){window.location.href="/CajaFacturas?id="+e._id},n.detalles=function(e){window.location="CajaDetalles?id="+e._id},n.createData=function(e){n.setState({idUpdate:e})},n.cerrarCaja=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/estado/"+t._id+"/Facturado").then((function(e){console.log(e.data),e.data.map((function(e){a+=e.total}))})).catch((function(e){return console.log(e)}));case 3:return t.estado="Cerrado",t.montoCierre=a,console.log("jsondatos",t),console.log("total_cierre_caja",a),e.next=9,F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas/update/"+t._id,t).then((function(){n.updateList()})).catch((function(e){return alert(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.verificarCaja=function(e){return new Promise((function(t){t(n.state.datos.map((function(t){if(t.cajaConf._id===e)return"Abierto"!==t.estado}))[0])}))},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsxs)("div",{className:"col-md-3",children:[t.cajaConf.descripcion," ",Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"alert alert-success-estado ".concat("Abierto"===t.estado?"alert-success":"alert-danger"," "),children:t.estado})," "]}),Object(h.jsx)("div",{className:"col-md-2",children:C()(t.fechaApertura).format("DD/MM/YYYY HH:mm:ss")}),Object(h.jsx)("div",{className:"col-md-2",children:t.fechaCierre&&C()(t.fechaCierre).format("DD/MM/YYYY HH:mm:ss")}),Object(h.jsxs)("div",{className:"col-md-3",children:[Object(h.jsx)("b",{children:"Apertura:"})," ",Object(G.convertMiles)(t.montoApertura)+" Gs."," ",Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Cierre:"})," ",t.montoCierre&&Object(G.convertMiles)(t.montoCierre)+" Gs."]}),"Abierto"===t.estado&&Object(h.jsxs)("div",{className:"col-md-2",children:[Object(h.jsx)("button",{onClick:function(){return e.detalles(t)},type:"button",className:"btn btn-success btn-sm mr-1 mb-1",children:"Detalles"}),Object(h.jsx)("button",{onClick:function(){return e.cerrarCaja(t)},type:"button",className:"btn btn-danger btn-sm mr-1",children:"Cerrar Caja"})]}),"Cerrado"===t.estado&&Object(h.jsx)("div",{className:"col-md-2",children:Object(h.jsx)("button",{onClick:function(){return e.detallesFacturas(t)},type:"button",className:"btn btn-success btn-sm mr-1 mb-1",children:"Facturas"})})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Cajas"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-3",children:"Descripcion - Estado"}),Object(h.jsx)("div",{className:"col-md-2",children:"Fecha pertura"}),Object(h.jsx)("div",{className:"col-md-2",children:"Fecha Cierre"}),Object(h.jsx)("div",{className:"col-md-3",children:"Montos"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(z,{onUpdateParentList:this.updateList,onParentVerificarCaja:this.verificarCaja})})]})]})}}]),a}(n.Component);J.contextType=x;var $=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).getRolesSelected=function(e){document.querySelectorAll("[type=checkbox]").forEach((function(e){return e.checked=!1})),n.state.rolesSelected.forEach((function(e){document.querySelector("#check_"+e)&&(document.querySelector("#check_"+e).checked=!0)}))},n.onChangeNickname=function(e){n.setState({nickname:e.target.value})},n.onChangeNombreCompleto=function(e){n.setState({nombre_completo:e.target.value})},n.onChangePassword=function(e){n.setState({password:e.target.value})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.roleslist=function(){return n.state.roles&&n.state.roles.map((function(e,t){return Object(h.jsxs)("li",{className:"list-group-item list-group-item-roles ",children:[Object(h.jsxs)("div",{className:"col-md-5",children:[Object(h.jsx)("input",{className:"form-check-input",type:"checkbox",value:e.rol,id:"check_"+e.rol}),e.rol]}),Object(h.jsx)("div",{className:"col-md-7",children:e.descripcion})]},"key-"+t)}))},n.onSubtmit=function(e){e.preventDefault();var t=[];if(document.querySelectorAll("[type='checkbox']:checked").forEach((function(e){t.push(e.value)})),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var a={nickname:n.state.nickname,nombre_completo:n.state.nombre_completo,password:n.state.password,roles:t,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/usuarios/add",a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({nickname:"",nombre_completo:"",password:"",rolesSelected:[],textButton:"Crear",titleForm:"Crear Usuario",idUpdate:"NEW"})}else{var c={nickname:n.state.nickname,nombre_completo:n.state.nombre_completo,password:n.state.password,roles:t,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/usuarios/update/"+n.state.idUpdate,c).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={nickname:"",nombre_completo:"",password:"",roles:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ROLES,rolesSelected:[],user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Usuario",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.context.currentUser;this.setState({user_created:t.name,user_updated:t.name}),F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/roles/"+this.props.idUpdate).then((function(t){e.setState({roles:t.data})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/usuarios/"+this.props.idUpdate).then((function(t){e.setState({nickname:t.data.nickname,nombre_completo:t.data.nombre_completo,password:t.data.password,rolesSelected:t.data.roles,textButton:"Editar",titleForm:"Editar Usuario"},(function(){return e.getRolesSelected()}))})).catch((function(e){return console.log(e)})):this.setState({nickname:"",nombre_completo:"",password:"",textButton:"Crear",titleForm:"Crear Usuario",idUpdate:this.props.idUpdate}))}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Nombre Completo: "}),Object(h.jsx)("input",{type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.nombre_completo,onChange:this.onChangeNombreCompleto})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Nickname: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.nickname,onChange:this.onChangeNickname})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title d-flex",children:[Object(h.jsx)("div",{className:"col-md-1"}),Object(h.jsx)("div",{className:"col-md-4",children:"Rol"}),Object(h.jsx)("div",{className:"col-md-7",children:"Descripcion"})]})}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.roleslist()})]})})]}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);$.contextType=x;var Q=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/usuarios/").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/usuarios/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-2",children:t.nickname}),Object(h.jsx)("div",{className:"col-md-5",children:t.nombre_completo}),Object(h.jsx)("div",{className:"col-md-3",children:t.roles.join(", ")}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Usuarios"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col-md-8",children:[Object(h.jsxs)("div",{className:"alert alert-warning",children:[Object(h.jsx)(u.a,{icon:S.f})," Para ver los cambios cierre session y vuelva a ingresar"]}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-2",children:"Nickname"}),Object(h.jsx)("div",{className:"col-md-5",children:"Nombre Completo"}),Object(h.jsx)("div",{className:"col-md-3",children:"Roles"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})]}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)($,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),X=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeCodigo=function(e){n.setState({codigo:e.target.value})},n.onChangeDescripcion=function(e){n.setState({descripcion:e.target.value})},n.onChangePrecioCosto=function(e){n.setState({precio_costo:e.target.value})},n.onChangePrecioVenta=function(e){n.setState({precio_venta:e.target.value})},n.onChangeCantidad=function(e){n.setState({cantidad:e.target.value})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={codigo:n.state.codigo,descripcion:n.state.descripcion,cantidad:parseInt(n.state.cantidad.replace(/\./gi,"")),precio_costo:parseInt(n.state.precio_costo.replace(/\./gi,"")),precio_venta:parseInt(n.state.precio_venta.replace(/\./gi,"")),user_created:n.state.user_created,user_updated:n.state.user_updated};console.log("Inventario",t),F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({codigo:"",descripcion:"",cantidad:"0",precio_costo:"0",precio_venta:"0",textButton:"Crear",titleForm:"Crear Inventario",idUpdate:"NEW"})}else{var a={codigo:n.state.codigo,descripcion:n.state.descripcion,cantidad:n.state.cantidad&&parseInt((n.state.cantidad+"").replace(/\./gi,"")),precio_costo:n.state.precio_costo&&parseInt((n.state.precio_costo+"").replace(/\./gi,"")),precio_venta:parseInt((n.state.precio_venta+"").replace(/\./gi,"")),user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={codigo:"",descripcion:"",cantidad:"0",precio_costo:"0",precio_venta:"0",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Inventario",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/"+this.props.idUpdate).then((function(t){e.setState({codigo:t.data.codigo,descripcion:t.data.descripcion,cantidad:t.data.cantidad,precio_costo:t.data.precio_costo,precio_venta:t.data.precio_venta,textButton:"Editar",titleForm:"Editar Inventario"})})).catch((function(e){return console.log(e)})):this.setState({codigo:"",descripcion:"",cantidad:"0",precio_costo:"0",precio_venta:"0",textButton:"Crear",titleForm:"Crear Inventario",idUpdate:this.props.idUpdate}))}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Codigo Barra (Requerido 5 caracteres): "}),Object(h.jsx)("input",{type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,maxLength:5,className:"form-control",value:this.state.codigo,onChange:this.onChangeCodigo})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Descripcion: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.descripcion,onChange:this.onChangeDescripcion})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Cantidad: "}),Object(h.jsx)(M.a,{disabled:!0,thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.cantidad,onChange:this.onChangeCantidad,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Precio Costo: "}),Object(h.jsx)(M.a,{disabled:!0,thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.precio_costo,onChange:this.onChangePrecioCosto,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Precio Venta: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.precio_venta,onChange:this.onChangePrecioVenta,required:!0})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);X.contextType=x;var Z=a(33).convertMiles,ee=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/").then((function(e){console.log(e.data),n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete",t._id),e.next=3,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/"+t._id).then((function(e){console.log("res",e.data),"relacionado"===e.data.delete?alert("No se puede eliminar, existen compras relacionadas a este inventario"):n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))})})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"componentDidUpdate",value:function(){}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsxs)("div",{className:"col-md-4",children:[t.codigo,Object(h.jsx)("br",{}),Object(h.jsxs)("span",{className:"details-user-actions",children:[Object(h.jsx)("b",{children:" Creado por: "}),t.user_created,Object(h.jsx)("b",{children:" Actualidado por: "}),t.user_updated]})]}),Object(h.jsx)("div",{className:"col-md-3",children:t.descripcion}),Object(h.jsxs)("div",{className:"col-md-3 details-consumision",children:[Object(h.jsx)("b",{children:"Cantidad:"})," ",Object(h.jsx)("span",{children:Z(t.cantidad)}),Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Costo:"})," ",Object(h.jsxs)("span",{children:[Z(t.precio_costo)," Gs."]}),Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Venta:"})," ",Object(h.jsxs)("span",{children:[Z(t.precio_venta)," Gs."]})]}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Inventarios"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-3",children:"Codigo"}),Object(h.jsx)("div",{className:"col-md-7",children:"Descripcion"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(X,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),te=a(97),ae=a(33).convertMiles,ne=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).getInventariosOptions=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/Inventarios").then((function(e){var t=[];e.data.length>0?(e.data.forEach((function(e){t.push({value:e._id,label:e.descripcion+" | "+e.codigo})})),n.setState({inventarioSelected:t[0],inventarioOptions:t})):n.setState({inventarioSelected:{},inventarioOptions:[]})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.getProveedoresOptions=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/Proveedores").then((function(e){var t=[];e.data.length>0?(e.data.forEach((function(e){t.push({value:e._id,label:e.razonsocial})})),n.setState({proveedorSelected:t[0],proveedorOptions:t})):n.setState({proveedorSelected:{},proveedorOptions:[]})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.onChangeFechaCompra=function(e){n.setState({fechaCompra:e})},n.onChangeNumeroFactura=function(e){n.setState({numerofactura:e.target.value})},n.onChangeTotal=function(e){n.setState({total:e.target.value})},n.onChangeInventario=function(e){n.setState({inventarioSelected:e})},n.onChangeProveedor=function(e){n.setState({proveedorSelected:e})},n.onChangeCantidad=function(e){n.setState({cantidad:e.target.value},(function(){return n.calcularTotal()}))},n.onChangeCosto=function(e){n.setState({costo:e.target.value},(function(){return n.calcularTotal()}))},n.calcularTotal=function(){var e;e=parseInt(n.state.cantidad.replace(/\./gi,""))*parseInt(n.state.costo.replace(/\./gi,"")),n.setState({total:e})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={numerofactura:n.state.numerofactura,inventario:n.state.inventarioSelected.value,proveedor:n.state.proveedorSelected.value,fecha_compra:n.state.fechaCompra,cantidad:n.state.cantidad,costo:n.state.costo,total:n.state.total,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/compras/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({numerofactura:"",inventarioSelected:n.state.inventarioOptions[0],proveedorSelected:n.state.proveedorOptions[0],cantidad:"",costo:"",total:"",textButton:"Crear",titleForm:"Crear Compra",idUpdate:"NEW"})}else{var a={numerofactura:n.state.numerofactura,inventario:n.state.inventarioSelected.value,proveedor:n.state.proveedorSelected.value,fecha_compra:n.state.fechaCompra,cantidad:n.state.cantidad,costo:(n.state.costo+"").replace(/\./gi,""),total:(n.state.total+"").replace(/\./gi,""),user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/compras/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={numerofactura:"",fechaCompra:new Date,inventarioSelected:{},inventarioOptions:[],proveedorSelected:{},proveedorOptions:[],cantidad:"",costo:"",total:"",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Compra",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/compras/"+this.props.idUpdate).then((function(t){e.setState({numerofactura:t.data.numerofactura,inventarioSelected:e.state.inventarioOptions.filter((function(e){return e.value===t.data.inventario}))[0],proveedorSelected:e.state.proveedorOptions.filter((function(e){return e.value===t.data.proveedor}))[0],cantidad:ae(t.data.cantidad),costo:ae(t.data.costo),total:ae(t.data.total),textButton:"Editar",titleForm:"Editar Compra"})})).catch((function(e){return console.log(e)})):this.setState({numerofactura:"",inventario:this.state.inventarioOptions[0],proveedor:this.state.proveedorOptions[0],cantidad:"",costo:"",total:"",textButton:"Crear",titleForm:"Crear Compra",idUpdate:this.props.idUpdate}))}},{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name}),this.getInventariosOptions(),this.getProveedoresOptions()}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Factura: "}),Object(h.jsx)("input",{type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.numerofactura,onChange:this.onChangeNumeroFactura})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Inventario: "}),Object(h.jsx)(K.a,{noOptionsMessage:function(){return Object(h.jsx)("a",{href:"/Inventario",children:"Cargar Inventario"})},value:this.state.inventarioSelected,options:this.state.inventarioOptions,onChange:this.onChangeInventario,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Proveedor: "}),Object(h.jsx)(K.a,{noOptionsMessage:function(){return Object(h.jsx)("a",{href:"/Proveedores",children:"Cargar Proveedor"})},value:this.state.proveedorSelected,options:this.state.proveedorOptions,onChange:this.onChangeProveedor,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Fecha Compra: "}),Object(h.jsx)(D.a,{className:"form-control",locale:"esp",required:!0,dateFormat:"dd/MM/yyyy",selected:this.state.fechaCompra,onChange:this.onChangeFechaCompra,showYearDropdown:!0,customInput:Object(h.jsx)(te.a,{mask:"11/11/1111",placeholder:"mm/dd/yyyy"})})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Cantidad/KG: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.cantidad,onChange:this.onChangeCantidad,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Costo: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.costo,onChange:this.onChangeCosto,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Total: "}),Object(h.jsx)(M.a,{disabled:!0,thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.total,onChange:this.onChangeTotal,required:!0})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);ne.contextType=x;var ce=a(33).convertMiles,se=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/compras/").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:window.paginar("list-group","list-group-item",!0);case 3:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/compras/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-2",children:t.numerofactura}),Object(h.jsxs)("div",{className:"col-md-4",children:[t.inventario?t.inventario.descripcion:"Inventario Eliminado",Object(h.jsx)("br",{}),Object(h.jsxs)("div",{style:{color:"#918C8C",fontSize:"12px"},children:[Object(h.jsx)("b",{children:"Comprado el: "}),C()(t.fecha_compra).format("DD-MM-YYYY")]})]}),Object(h.jsx)("div",{className:"col-md-2",children:t.proveedor.razonsocial}),Object(h.jsxs)("div",{className:"col-md-3 details-consumision ",children:["Cantidad: ",Object(h.jsx)("span",{children:ce(t.cantidad)}),Object(h.jsx)("br",{}),"Costo: ",Object(h.jsxs)("span",{children:["Gs. ",ce(t.costo)]}),Object(h.jsx)("br",{}),"Total: ",Object(h.jsxs)("span",{children:["Gs. ",ce(t.total)]}),Object(h.jsx)("br",{})]}),Object(h.jsxs)("div",{className:"col-md-1 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Compras"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-2",children:"Factura"}),Object(h.jsx)("div",{className:"col-md-4",children:"Inventario"}),Object(h.jsx)("div",{className:"col-md-2",children:"Proveedor"}),Object(h.jsx)("div",{className:"col-md-2",children:"Montos"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(ne,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),oe=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeRazonSocial=function(e){n.setState({razonsocial:e.target.value})},n.onChangeRuc=function(e){n.setState({ruc:e.target.value,div:Object(G.getDiv)(e.target.value)})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={ruc:n.state.ruc,div:n.state.div,razonsocial:n.state.razonsocial,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/proveedores/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({ruc:"",div:"",razonsocial:"",textButton:"Crear",titleForm:"Crear Proveedor",idUpdate:"NEW"})}else{var a={ruc:n.state.ruc,razonsocial:n.state.razonsocial,div:n.state.div,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/proveedores/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={ruc:"",div:"",razonsocial:"",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Proveedor",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/proveedores/"+this.props.idUpdate).then((function(t){e.setState({ruc:t.data.ruc,razonsocial:t.data.razonsocial,div:t.data.div,textButton:"Editar",titleForm:"Editar Proveedor"})})).catch((function(e){return console.log(e)})):this.setState({ruc:"",div:"",razonsocial:"",textButton:"Crear",titleForm:"Crear Proveedor",idUpdate:this.props.idUpdate}))}},{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name}),this._input.focus()}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Ruc: "}),Object(h.jsx)(M.a,{thousandSeparator:"",decimalSeparator:"_",autoFocus:!0,getInputRef:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.ruc,onChange:this.onChangeRuc})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"DIV: "}),Object(h.jsx)("input",{type:"number",disabled:!0,id:"idDiv",className:"form-control",value:this.state.div})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Razon Social: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.razonsocial,onChange:this.onChangeRazonSocial})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);oe.contextType=x;var re=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/proveedores/").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:window.paginar("list-group","list-group-item",!0);case 3:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/proveedores/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"componentDidUpdate",value:function(){}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-4",children:t.ruc+"-"+t.div}),Object(h.jsx)("div",{className:"col-md-6",children:t.razonsocial}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Proveedores"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-4",children:"Ruc"}),Object(h.jsx)("div",{className:"col-md-6",children:"Razon Social"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(oe,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),ie=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).getTimbrado=function(){F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/activado/0").then((function(e){n.setState({timbrado:e.data})}))},n.getClientesOptions=function(){F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes").then((function(e){var t=[],a={};e.data.forEach((function(e){"000000"===e.ruc&&(a={value:e,label:e.ruc+"-"+e.div+" "+e.razonsocial+" | CI:"+e.ruc.replace(/\./gi,"")}),t.push({value:e,label:e.ruc+"-"+e.div+" "+e.razonsocial+" | CI:"+e.ruc.replace(/\./gi,"")})})),n.setState({clienteOptions:t,clienteSelected:a,ruc:a.value.ruc,div:a.value.div,razonsocial:a.value.razonsocial})})).catch((function(e){return console.log(e)}))},n.getInventariosOptions=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/Inventarios").then((function(e){var t=[];t.push({value:"undefined",label:"",codigo:"",precio:0}),e.data.length>0?(e.data.forEach((function(e){t.push({value:e._id,label:e.descripcion,codigo:e.codigo,precio:e.precio_venta})})),n.setState({inventarioSelected:t[0],inventarioOptions:t})):n.setState({inventarioSelected:{},inventarioOptions:[]})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.onKeyPressBuscarCliente=function(e){"-"===e.key&&(document.querySelector("#PanelVueltos").classList.remove("d-none"),document.querySelector("#PanelCliente").classList.add("d-none"),n._inputRecibido.focus(),e.preventDefault()),"+"===e.key&&(e.preventDefault(),n.onSubtmitCliente(e))},n.onKeyPressRecibido=function(e){"-"===e.key&&(document.querySelector("#PanelProductos").classList.remove("d-none"),document.querySelector("#PanelVueltos").classList.add("d-none"),n._input.focus(),e.preventDefault()),"+"!==e.key&&"Enter"!==e.key||(e.preventDefault(),n.props.onUpdateParentUltimoVuelto(n.state.pagamiento_vuelto),document.querySelector("#PanelVueltos").classList.add("d-none"),document.querySelector("#PanelCliente").classList.remove("d-none"),n._inputBuscarCliente.focus(),e.preventDefault())},n.onKeyPressCodigoBarra=function(e){"+"===e.key&&(e.preventDefault(),null!==document.querySelector("#totales_total")&&(document.querySelector("#PanelProductos").classList.add("d-none"),document.querySelector("#PanelVueltos").classList.remove("d-none"),n._inputRecibido.focus(),n.setState({pagamiento_total:document.querySelector("#totales_total").innerText.replace(/\./gi,"")}))),"-"===e.key&&e.preventDefault()},n.onChangeCodigoBarra=function(e){n.setState({codigoBarra:e.target.value});var t=e.target.value;if(13===t.length){var a=parseInt(t.substring(2,7)),c=void 0;if(n.state.inventarioOptions.forEach((function(e,t){if(parseInt(e.codigo)===a)return c=t,!1})),c){var s=parseInt(t.substring(7,12))/1e3,o=n.state.inventarioOptions[c],r=o.precio,i=parseInt(o.precio*s);n.setState({inventarioSelected:o,producto:o.label,cantidad:s,precio:r,total:i})}}else n.setState({inventarioSelected:n.state.inventarioOptions[0],producto:n.state.inventarioOptions[0].label,cantidad:"",precio:"",total:""})},n.onChangeCantidad=function(e){n.setState({cantidad:e.target.value})},n.onChangePrecio=function(e){n.setState({precio:e.target.value})},n.onChangeTotal=function(e){n.setState({total:e.target.value})},n.onChangeProducto=function(e){n.setState({producto:e.target.value})},n.onChangeRecibido=function(e){var t=parseInt(e.target.value.replace(/\./gi,""))-n.state.pagamiento_total;n.setState({pagamiento_recibido:e.target.value,pagamiento_vuelto:t})},n.onChangeRazonSocial=function(e){n.setState({razonsocial:e.target.value})},n.onChangeRuc=function(e){n.setState({ruc:e.target.value,div:Object(G.getDiv)(e.target.value)})},n.onChangeCliente=function(e){n.setState({clienteSelected:e,ruc:e.value.ruc,div:e.value.div,razonsocial:e.value.razonsocial})},n.onSubtmit=function(e){e.preventDefault();var t={caja:n.props.caja._id,inventario:n.state.inventarioSelected.value,cantidad:n.state.cantidad,precio:n.state.precio,total:n.state.total,estado:"Agregado",user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({codigoBarra:"",inventarioSelected:n.state.inventarioOptions[0],producto:"",cantidad:"",precio:"",total:""})},n.onSubtmitCliente=function(e){e.preventDefault();var t={caja:n.props.caja,cliente:n.state.clienteSelected.value,timbrado:n.state.timbrado,recibido:n.state.pagamiento_recibido,total:n.state.pagamiento_total,vuelto:n.state.pagamiento_vuelto,user_created:n.state.user_created,user_updated:n.state.user_updated},a={ruc:n.state.ruc,div:n.state.div,razonsocial:n.state.razonsocial,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/comprobar",a).then((function(e){t.cliente=e.data,n.submitFactura(t)})).catch((function(e){return console.log(e)}))},n.submitFactura=function(e){n.props.onParentPrintFactura(e),document.querySelector("#PanelProductos").classList.remove("d-none"),document.querySelector("#PanelVueltos").classList.add("d-none"),document.querySelector("#PanelCliente").classList.add("d-none"),n._input.focus()},n.state={ruc:"",div:"",razonsocial:"",timbrado:{},inventarioSelected:{},inventarioOptions:[],clienteSelected:{},clienteOptions:[],caja:{},cliente:{},codigoBarra:"",cantidad:"",precio:"",total:"",producto:"",pagamiento_recibido:"",pagamiento_total:"",pagamiento_vuelto:"",user_created:"",user_updated:"",textButton:"Agregar",titleForm:"Agregar Detalle",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.context.currentUser;this.setState({user_created:t.name,user_updated:t.name}),this.getTimbrado(),this.getInventariosOptions(),this.getClientesOptions(),setInterval((function(){document.activeElement!==e._input&&e._input.focus(),document.activeElement!==e._inputRecibido&&e._inputRecibido.focus()}),"1000")}},{key:"showNotification",value:function(e){this._input.focus(),this.props.onUpdateParentList("true")}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{id:"PanelProductos",className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Codigo Barra: "}),Object(h.jsx)("input",{id:"codigobarra",type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,maxLength:13,className:"form-control",value:this.state.codigoBarra,onChange:this.onChangeCodigoBarra,onKeyPress:this.onKeyPressCodigoBarra})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Producto: "}),Object(h.jsx)("input",{type:"text",disabled:!0,className:"form-control",value:this.state.producto,onChange:this.onChangeProducto})]}),Object(h.jsxs)("div",{className:"form-group col-md-3",children:[Object(h.jsx)("label",{children:"Cantidad: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.cantidad,onChange:this.onChangeCantidad,disabled:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-4",children:[Object(h.jsx)("label",{children:"Precio: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.precio,onChange:this.onChangePrecio,disabled:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-5",children:[Object(h.jsx)("label",{children:"Total: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.total,onChange:this.onChangeTotal,disabled:!0})]})]}),Object(h.jsx)("div",{className:"form-group d-none",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-warning d-none"})})]})]}),Object(h.jsxs)("div",{id:"PanelVueltos",className:"container d-none",children:[Object(h.jsx)("h3",{children:"Vueltos"}),Object(h.jsx)("form",{children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Recibido: "}),Object(h.jsx)(M.a,{autoFocus:!0,getInputRef:function(t){return e._inputRecibido=t},thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.pagamiento_recibido,onChange:this.onChangeRecibido,onKeyPress:this.onKeyPressRecibido,required:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Total: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.pagamiento_total,disabled:!0})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Vuelto: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:",",className:"form-control",value:this.state.pagamiento_vuelto,disabled:!0})]})]})})]}),Object(h.jsx)("div",{id:"PanelCliente",className:"container d-none",children:Object(h.jsxs)("form",{onSubmit:this.onSubtmitCliente,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Buscar Cliente Registrado: "}),Object(h.jsx)(K.a,{autoFocus:!0,ref:function(t){return e._inputBuscarCliente=t},noOptionsMessage:function(){return"Sin resultados"},value:this.state.clienteSelected,options:this.state.clienteOptions,onChange:this.onChangeCliente,onKeyDown:this.onKeyPressBuscarCliente,required:!0})]}),Object(h.jsx)("hr",{className:"solid"}),Object(h.jsx)("h3",{children:"Cliente"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Ruc: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:"_",required:!0,className:"form-control",value:this.state.ruc,onChange:this.onChangeRuc})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"DIV: "}),Object(h.jsx)("input",{type:"number",disabled:!0,id:"idDiv",className:"form-control",value:this.state.div})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Razon Social: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.razonsocial,onChange:this.onChangeRazonSocial})]})]})]}),Object(h.jsx)("div",{className:"form-group d-none",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-warning"})})]})})]})}}]),a}(n.Component);ie.contextType=x;var de=a(33).convertMiles,le=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).irCaja=function(){window.location.href="./Caja"},n.updateUltimoVuelto=function(e){n.setState({ultimo_vuelto:e})},n.updateList=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),e.next=4,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/estado/"+a+"/Agregado").then((function(e){n.setState({datos:e.data,loading:!1},(function(){return console.log(n.state)}))})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),n.getCaja=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),console.log("id",a),e.next=5,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas/"+a).then((function(e){var t=e.data;console.log("caja",t),n.setState({caja:t,ultimo_vuelto:t.ultimoVuelto})})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.printFactura=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={ruc:t.cliente.ruc,razonSocial:t.cliente.razonsocial,timbrado:t.timbrado.numero,numeroComprobante:t.timbrado.comprobante,recibido:parseInt((t.recibido+"").replace(/\./gi,"")),total:parseInt((t.total+"").replace(/\./gi,"")),vuelto:parseInt((t.vuelto+"").replace(/\./gi,"")),user_created:t.user_created,user_updated:t.user_updated},e.next=3,F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/facturas/add",a).then((function(e){var a=[];n.state.datos.forEach((function(e){var t=e._id;a.push(t)}));var c={ids:a,factura:e.data.id};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/update-factura",c).catch((function(e){return console.log(e)})),F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/inventarios/update-stock",n.state.datos).catch((function(e){return console.log(e)})),n.openPrintFactura(t)})).catch((function(e){return console.log(e)}));case 3:return c={id:n.state.caja._id,ultimoVuelto:parseInt((t.vuelto+"").replace(/\./gi,""))},e.next=6,F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas/ultimoVuelto",c).catch((function(e){return console.log(e)}));case 6:n.setState({ultimo_vuelto:c.ultimoVuelto,datos:[]});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openPrintFactura=function(e){return new Promise((function(t,a){var c=document.createElement("table"),s=document.createElement("tr"),o=document.createElement("th");o.colSpan=4,o.textContent=e.timbrado.nombreEmpresa,s.appendChild(o),c.appendChild(s),s=document.createElement("tr"),o.colSpan=4,(o=document.createElement("td")).textContent="Comprobante #"+e.timbrado.comprobante,s.appendChild(o),c.appendChild(s),s=document.createElement("tr"),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FACTURA_HEADERS.split(",").forEach((function(e){var t=document.createElement("th");t.textContent=e,s.appendChild(t)})),c.appendChild(s),n.state.datos.forEach((function(e){var t=document.createElement("tr"),a=e.inventario,n=e.cantidad,s=e.precio,o=e.total;[a.descripcion,de(n),de(s),de(o)].forEach((function(e){var a=document.createElement("td");a.textContent=e,t.appendChild(a)})),c.appendChild(t)})),console.log(c);var r=window.open("","Print","height=600,width=800");r.document.write(c.outerHTML),r.print(),t(r.close())}))},n.state={datos:[],ultimo_vuelto:"",loading:!0,caja:{},idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){document.querySelector(".content-wrapper").style.marginLeft="5px",this.updateList(),this.getCaja()}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t,a){return Object(h.jsxs)("li",{className:"list-productos list-group-item",children:[Object(h.jsx)("div",{className:"col-md-4",children:a+1+"- "+t.inventario.descripcion}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:de(t.cantidad)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:de(t.precio)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:de(t.total)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})})]},t._id)}))}},{key:"datalistTotales",value:function(){var e=0,t=0,a=0;return this.state.datos.map((function(n){a+=n.cantidad,e+=n.precio,t+=n.total})),Object(h.jsx)("div",{className:"card-footer font-weight-bold",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-4 text-right",children:"Totales"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:de(a)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:de(e)}),Object(h.jsx)("div",{id:"totales_total",className:"col-md-2 text-right",children:de(t)})]})})}},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"content-wrapper",id:"content",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-3",children:Object(h.jsx)("h2",{children:this.state.caja.cajaConf&&"Detalle "+this.state.caja.cajaConf.descripcion})}),Object(h.jsx)("div",{className:"col-md-5",children:Object(h.jsx)("h2",{className:"text-center",children:"Ultimo Vuelto "+(this.state.ultimo_vuelto?de(this.state.ultimo_vuelto):"0")+" Gs."})}),Object(h.jsxs)("div",{className:"col-md-8",children:[Object(h.jsxs)("button",{onClick:function(){return e.irCaja()},type:"button",className:"btn btn-warning btn-sm mb-1",children:[Object(h.jsx)(u.a,{icon:S.a})," Volvar a Caja"]}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-4",children:"# - Decripcion"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:"Cantidad"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:"Precio"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:"Total"}),Object(h.jsx)("div",{className:"col-md-2 text-right"})]})}),Object(h.jsx)("ul",{id:"list",className:"list-group overflow-auto",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-11 text-center m-3",children:"Sin registros encontrados"}):this.datalist()}),this.state.datos.length>0?this.datalistTotales():""]})]}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(ie,{caja:this.state.caja,onParentPrintFactura:this.printFactura,onUpdateParentList:this.updateList,onUpdateParentUltimoVuelto:this.updateUltimoVuelto})})]})})}}]),a}(n.Component);le.contextType=x;var ue=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeDescripcion=function(e){n.setState({descripcion:e.target.value})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={descripcion:n.state.descripcion,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({descripcion:"",textButton:"Crear",titleForm:"Crear Inventario",idUpdate:"NEW"})}else{var a={descripcion:n.state.descripcion,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={codigo:"",descripcion:"",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Caja",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/"+this.props.idUpdate).then((function(t){e.setState({descripcion:t.data.descripcion,textButton:"Editar",titleForm:"Editar Caja"})})).catch((function(e){return console.log(e)})):this.setState({descripcion:"",textButton:"Crear",titleForm:"Crear Caja",idUpdate:this.props.idUpdate}))}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Descripcion: "}),Object(h.jsx)("input",{type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.descripcion,onChange:this.onChangeDescripcion})]})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);ue.contextType=x;var je=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/").then((function(e){console.log(e.data),n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-config/"+t._id).then((function(e){n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"componentDidUpdate",value:function(){}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-10",children:t.descripcion}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Cajas Configuraciones"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-10",children:"Descripcion"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(ue,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),pe=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeRazonSocial=function(e){n.setState({razonsocial:e.target.value})},n.onChangeRuc=function(e){n.setState({ruc:e.target.value,div:Object(G.getDiv)(e.target.value)})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={ruc:n.state.ruc,div:n.state.div,razonsocial:n.state.razonsocial,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({ruc:"",div:"",razonsocial:"",textButton:"Crear",titleForm:"Crear Cliente",idUpdate:"NEW"})}else{var a={ruc:n.state.ruc,razonsocial:n.state.razonsocial,div:n.state.div,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={ruc:"",div:"",razonsocial:"",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Cliente",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/"+this.props.idUpdate).then((function(t){e.setState({ruc:t.data.ruc,razonsocial:t.data.razonsocial,div:t.data.div,textButton:"Editar",titleForm:"Editar Cliente"})})).catch((function(e){return console.log(e)})):this.setState({ruc:"",div:"",razonsocial:"",textButton:"Crear",titleForm:"Crear Cliente",idUpdate:this.props.idUpdate}))}},{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name}),this._input.focus()}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Ruc: "}),Object(h.jsx)(M.a,{thousandSeparator:".",decimalSeparator:"_",autoFocus:!0,getInputRef:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.ruc,onChange:this.onChangeRuc})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"DIV: "}),Object(h.jsx)("input",{type:"number",disabled:!0,id:"idDiv",className:"form-control",value:this.state.div})]}),Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Razon Social: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.razonsocial,onChange:this.onChangeRazonSocial})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);pe.contextType=x;var he=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/clientes/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"componentDidUpdate",value:function(){}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t){return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-4",children:t.ruc+"-"+t.div}),Object(h.jsx)("div",{className:"col-md-6",children:t.razonsocial}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Clientes"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-4",children:"Ruc"}),Object(h.jsx)("div",{className:"col-md-6",children:"Razon Social"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(pe,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component),me=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).onChangeNumero=function(e){n.setState({numero:e.target.value})},n.onChangeComprobante=function(e){n.setState({comprobante:e.target.value})},n.onChangeNombreEmpresa=function(e){n.setState({nombreEmpresa:e.target.value})},n.onChangeRuc=function(e){n.setState({ruc:e.target.value})},n.onChangeVencimiento=function(e){n.setState({vencimiento:e})},n.handleCloseAlert=function(){document.querySelector("#alert").classList.replace("show","hide")},n.onSubtmit=function(e){if(e.preventDefault(),"NEW"===n.props.idUpdate||""===n.props.idUpdate){var t={ruc:n.state.ruc,nombreEmpresa:n.state.nombreEmpresa,numero:n.state.numero,comprobante:n.state.comprobante,estado:"desactivado",vencimiento:n.state.vencimiento,user_created:n.state.user_created,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/add",t).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)})),n.setState({ruc:"",nombreEmpresa:"",numero:"",comprobante:"",vencimiento:"",textButton:"Crear",titleForm:"Crear Timbrado",idUpdate:"NEW"})}else{var a={ruc:n.state.ruc,nombreEmpresa:n.state.nombreEmpresa,numero:n.state.numero,comprobante:n.state.comprobante,vencimiento:n.state.vencimiento,user_updated:n.state.user_updated};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/update/"+n.state.idUpdate,a).then((function(e){return n.showNotification(!0)})).catch((function(e){return n.showNotification(!1)}))}},n.state={ruc:"",nombreEmpresa:"",numero:"",comprobante:"",vencimiento:"",user_created:"",user_updated:"",textButton:"Crear",titleForm:"Crear Timbrado",idUpdate:"NEW"},n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.idUpdate!==this.props.idUpdate&&(this.setState({idUpdate:this.props.idUpdate}),"NEW"!==this.props.idUpdate&&""!==this.props.idUpdate?F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/"+this.props.idUpdate).then((function(t){e.setState({ruc:t.data.ruc,nombreEmpresa:t.data.nombreEmpresa,numero:t.data.numero,vencimiento:new Date(t.data.vencimiento),textButton:"Editar",titleForm:"Editar Timbrado"})})).catch((function(e){return console.log(e)})):this.setState({ruc:"",div:"",razonsocial:"",textButton:"Crear",titleForm:"Crear Timbrado",idUpdate:this.props.idUpdate}))}},{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user_created:e.name,user_updated:e.name}),this._input.focus()}},{key:"showNotification",value:function(e){document.querySelector("#alert").classList.replace("hide","show"),!0===e?(document.querySelector("#alert").classList.replace("alert-warning","alert-success"),document.querySelector("#alert #text").innerHTML="<strong>Exito!</strong> Los datos han sido actualizados."):(document.querySelector("#alert").classList.replace("alert-success","alert-warning"),document.querySelector("#alert #text").innerHTML="<strong>Error!</strong> Contacte con el administrador."),this._input.focus(),this.props.onUpdateParentList("true"),setTimeout((function(){document.querySelector("#alert").classList.replace("show","hide")}),3e3)}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h3",{children:this.state.titleForm}),Object(h.jsxs)("form",{onSubmit:this.onSubtmit,children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"form-group col-md-12",children:[Object(h.jsx)("label",{children:"Nombre Empresa: "}),Object(h.jsx)("input",{type:"text",autoFocus:!0,ref:function(t){return e._input=t},required:!0,className:"form-control",value:this.state.nombreEmpresa,onChange:this.onChangeNombreEmpresa})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Ruc: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.ruc,onChange:this.onChangeRuc})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Numero: "}),Object(h.jsx)(M.a,{thousandSeparator:"",decimalSeparator:"_",required:!0,className:"form-control",value:this.state.numero,onChange:this.onChangeNumero})]}),Object(h.jsxs)("div",{className:"form-group col-md-6",children:[Object(h.jsx)("label",{children:"Comprobante: "}),Object(h.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.comprobante,onChange:this.onChangeComprobante})]}),Object(h.jsxs)("div",{className:"form-group vencimiento col-md-6",children:[Object(h.jsx)("label",{children:"Vencimiento: "}),Object(h.jsx)(D.a,{className:"form-control",required:!0,locale:"esp",dateFormat:"dd/MM/yyyy",selected:this.state.vencimiento,onChange:this.onChangeVencimiento,showYearDropdown:!0,isClearable:!0,customInput:Object(h.jsx)(te.a,{mask:"11/11/1111",placeholder:"mm/dd/yyyy"})})]})]}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("button",{type:"submit",className:"btn btn-warning",children:[Object(h.jsx)(u.a,{icon:S.a})," ",this.state.textButton]})}),Object(h.jsxs)("div",{id:"alert",className:"alert alert-success alert-dismissible fade hide",role:"alert",children:[Object(h.jsx)("span",{id:"text"}),Object(h.jsx)("button",{type:"button",className:"close",onClick:this.handleCloseAlert,children:Object(h.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})]})}}]),a}(n.Component);me.contextType=x;a(293);var be=function(e){var t=e.nameToggle,a=e.idToggle,n=e.onToggle;return Object(h.jsxs)("label",{className:"menu-item switch",children:[Object(h.jsx)("input",{id:a,type:"radio",name:t,onChange:n}),Object(h.jsx)("span",{className:"slider rounded"})]})},Oe=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/").then((function(e){n.setState({datos:e.data,loading:!1})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),n.onChangeCheckList=function(e){var t={datos:n.state.datos.filter((function(t){return t._id!==e._id})),estado:"activado",user_updated:n.state.user};F.a.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/activar/"+e._id,t).then((function(e){})).catch((function(e){return console.log(e)}))},n.deleteData=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.delete(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/timbrados/"+t._id).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));case 2:n.setState({datos:n.state.datos.filter((function(e){return e._id!==t._id}))});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateData=function(e){n.setState({idUpdate:e._id})},n.createData=function(e){n.setState({idUpdate:e})},n.state={datos:[],loading:!0,user:void 0,idUpdate:"",didUpdate:!0},n.datalist=n.datalist.bind(Object(I.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.context.currentUser;this.setState({user:e.name}),this.updateList()}},{key:"componentDidUpdate",value:function(){this.state.datos.map((function(e){"activado"===e.estado&&(document.querySelector("#toggle_"+e._id).checked=!0)}))}},{key:"datalist",value:function(){var e=this;return this.state.datos.map((function(t,a){var n=new Date(t.vencimiento),c=(n.getDate()>9?n.getDate():"0"+n.getDate())+"/"+(n.getMonth()>8?n.getMonth()+1:"0"+(n.getMonth()+1))+"/"+n.getFullYear();return Object(h.jsxs)("li",{className:"list-group-item",children:[Object(h.jsx)("div",{className:"col-md-2 informante-check",children:Object(h.jsx)(be,{nameToggle:"informanteToggle",idToggle:"toggle_"+t._id,onToggle:function(){return e.onChangeCheckList(t,a)}})}),Object(h.jsx)("div",{className:"col-md-2",children:t.nombreEmpresa}),Object(h.jsx)("div",{className:"col-md-2",children:t.ruc}),Object(h.jsx)("div",{className:"col-md-2",children:t.numero}),Object(h.jsx)("div",{className:"col-md-2",children:c}),Object(h.jsxs)("div",{className:"col-md-2 text-right",children:[Object(h.jsx)("button",{onClick:function(){return e.updateData(t)},type:"button",className:"btn btn-light btn-sm mr-1",children:Object(h.jsx)(u.a,{icon:S.e})}),Object(h.jsx)("button",{onClick:function(){return e.deleteData(t)},type:"button",className:"btn btn-danger btn-sm",children:Object(h.jsx)(u.a,{icon:S.k})})]})]},t._id)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Timbrados"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-8",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-2",children:"Activar"}),Object(h.jsx)("div",{className:"col-md-2",children:"Nombre Empresa"}),Object(h.jsx)("div",{className:"col-md-2",children:"Ruc"}),Object(h.jsx)("div",{className:"col-md-2",children:"Numero"}),Object(h.jsx)("div",{className:"col-md-2",children:"Vencimiento"}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:Object(h.jsxs)("button",{onClick:function(){return e.createData("NEW")},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.j})," Nuevo"]})})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.state.loading?Object(h.jsx)(Y.a,{animation:"border",variant:"primary",style:{margin:"25px",alignSelf:"center"}}):0===this.state.datos.length?Object(h.jsx)("div",{className:"col-md-12 text-center m-3",children:"Sin registros encontrados"}):this.datalist()})]})}),Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsx)(me,{idUpdate:this.state.idUpdate,onUpdateParentList:this.updateList})})]})]})}}]),a}(n.Component);Oe.contextType=x;var ve=a(33).convertMiles,_e=function(e){Object(k.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).updateList=Object(i.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),e.next=4,F.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL+"/cajas-detalles/facturas/"+a).then((function(e){n.setState({datos:e.data})})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),n.irCajas=function(){window.location="Caja"},n.state={datos:[],loading:!0,idUpdate:"",didUpdate:!0},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"datalistDetalle",value:function(e){return e.inventariousage.map((function(e,t){var a=e.inventario[0];return Object(h.jsxs)("div",{className:"col-md-12 row",children:[Object(h.jsx)("div",{className:"col-md-2"}),Object(h.jsx)("div",{className:"col-md-4",children:a.descripcion}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:ve(e.cantidad)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:ve(e.precio)}),Object(h.jsx)("div",{className:"col-md-2 text-right",children:ve(e.total)})]},t)}))}},{key:"datalist",value:function(){var e=this;return console.log(this.state.datos),this.state.datos.map((function(t,a){var n=t._id.factura[0];return Object(h.jsxs)("li",{className:"list-productos list-group-item ",children:[Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("b",{children:["Razon Social: ",n.razonSocial+" - Ruc: "+n.ruc," "]})}),e.datalistDetalle(t)]},a)}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"content-wrapper",id:"content",children:[Object(h.jsx)("h2",{children:"Facturacion"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-2 mb-2",children:Object(h.jsxs)("button",{onClick:function(){return e.irCajas()},type:"button",className:"btn btn-warning btn-sm",children:[Object(h.jsx)(u.a,{icon:S.a})," Volver a Cajas"]})}),Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"card-title row mb-0",children:[Object(h.jsx)("div",{className:"col-md-3",children:"Factura"}),Object(h.jsx)("div",{className:"col-md-7",children:"Descripcion"})]})}),Object(h.jsx)("input",{className:"form-control inputsearch",type:"search",placeholder:"Busqueda (minimo 3 letras)..."}),Object(h.jsx)("ul",{id:"list",className:"list-group",children:this.datalist()})]})})]})]})}}]),a}(n.Component),Se=(a(294),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL);function fe(e){var t=e.setToken,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),p=u[0],m=u[1],b=function(){var e=Object(i.a)(Object(r.a)().mark((function e(a){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,O({nickname:s,password:p});case 3:if(n=e.sent,t(n),!n.type){e.next=15;break}e.t0=n.type,e.next="erruser"===e.t0?9:"errpass"===e.t0?11:13;break;case 9:return document.querySelector("#nickname-error").innerHTML=n.msg,e.abrupt("break",14);case 11:return document.querySelector("#pass-error").innerHTML=n.msg,e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function O(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Se+"/authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){return Object(h.jsx)("div",{className:"iniciarsession login-card card mt-5",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h3",{className:"text-center pt-2",children:Object(h.jsx)("img",{alt:"",src:j})}),Object(h.jsx)("br",{}),Object(h.jsxs)("form",{action:"",method:"",onSubmit:b,children:[Object(h.jsxs)("div",{className:"form-group row",children:[Object(h.jsx)("label",{className:"col-md-4 col-form-label text-md-right",children:"Nickname"}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsx)("input",{value:s,id:"nickname",autoFocus:!0,type:"text",onChange:function(e){return t=e.target.value,o(t),void(document.querySelector("#nickname-error").innerHTML="");var t},className:"form-control",required:!0}),Object(h.jsx)("span",{id:"nickname-error",className:"validation-error"})]})]}),Object(h.jsxs)("div",{className:"form-group row",children:[Object(h.jsx)("label",{className:"col-md-4 col-form-label text-md-right",children:"Password"}),Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsx)("input",{value:p,id:"password",type:"password",onChange:function(e){return t=e.target.value,m(t),void(document.querySelector("#pass-error").innerHTML="");var t},className:"form-control",required:!0}),Object(h.jsx)("span",{id:"pass-error",className:"validation-error"})]})]}),Object(h.jsx)("div",{className:"form-group col-md-12  text-center",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-warning m-1 col-md-4",children:"Iniciar Sessi\xf3n"})})]})]})})};return Object(h.jsx)("div",{id:"login",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row justify-content-center space-pt--r100 space-pb--r100",children:Object(h.jsx)("div",{className:"col-md-6",children:_()})})})})}var xe=a(295),ge=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_JWTKEY;var Ce=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],s=function(){var e=Object(n.useState)(function(){var e=localStorage.getItem("tokenKH"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(d.a)(e,2),a=t[0],c=t[1];return{setToken:function(e){localStorage.setItem("tokenKH",JSON.stringify(e)),c(e.token)},token:a,getUsername:function(){var e=localStorage.getItem("tokenKH"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.username}}}(),o=s.token,l=s.setToken;if(!o)return console.log("Unauthorized: No token provided"),Object(h.jsx)(fe,{setToken:l});xe.verify(o,ge,function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(console.log("Unauthorized: Invalid token"),p()):a||c({id:n.id,name:n.nombre_completo,nickname:n.nickname,roles:n.roles,fecha:new Date,caja:{}});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());var u=function(){return Object(h.jsxs)(T.c,{children:[Object(h.jsx)(T.a,{path:"/Dashboard",element:Object(h.jsx)(B,{})}),Object(h.jsx)(T.a,{path:"/Caja",element:Object(h.jsx)(J,{})}),Object(h.jsx)(T.a,{path:"/CajaDetalles",element:Object(h.jsx)(le,{})}),Object(h.jsx)(T.a,{path:"/Usuarios",element:Object(h.jsx)(Q,{})}),Object(h.jsx)(T.a,{path:"/Inventario",element:Object(h.jsx)(ee,{})}),Object(h.jsx)(T.a,{path:"/Compras",element:Object(h.jsx)(se,{})}),Object(h.jsx)(T.a,{path:"/Proveedores",element:Object(h.jsx)(re,{})}),Object(h.jsx)(T.a,{path:"/CajasConfig",element:Object(h.jsx)(je,{})}),Object(h.jsx)(T.a,{path:"/Clientes",element:Object(h.jsx)(he,{})}),Object(h.jsx)(T.a,{path:"/Timbrados",element:Object(h.jsx)(Oe,{})}),Object(h.jsx)(T.a,{path:"/CajaFacturas",exact:!0,element:Object(h.jsx)(_e,{})})]})},j=function(){return Object(h.jsxs)(T.c,{children:[Object(h.jsx)(T.a,{path:"/Dashboard",element:Object(h.jsx)(B,{})}),Object(h.jsx)(T.a,{path:"/Caja",element:Object(h.jsx)(J,{})}),Object(h.jsx)(T.a,{path:"/CajaDetalles",element:Object(h.jsx)(le,{})}),Object(h.jsx)(T.a,{path:"/CajaFacturas",exact:!0,element:Object(h.jsx)(_e,{})})]})};return Object(h.jsx)("div",{id:"container",children:Object(h.jsx)("div",{className:"body-wrapper container-fluid p-0",children:Object(h.jsxs)(f.Provider,{value:{currentUser:a},children:[window.location.href.indexOf("CajaDetalles")<0?Object(h.jsx)(N,{}):Object(h.jsx)(E,{}),Object(h.jsx)(R.a,{children:function(){if(a){if(console.log("User registrado",a),a.roles.includes("CAJERO"))return console.log("RETORNA CAJERO"),j();if(a.roles.includes("ADM"))return console.log("RETORNA ADM"),u()}}()})]})})})};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(Ce,{})}),document.getElementById("root"))}},[[414,1,2]]]);
//# sourceMappingURL=main.e283d92b.chunk.js.map